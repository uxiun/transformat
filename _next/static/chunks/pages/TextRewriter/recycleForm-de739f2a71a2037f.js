(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{6591:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/TextRewriter/recycleForm",function(){return o(7635)}])},7635:function(e,t,o){"use strict";o.r(t);var r=o(1527),l=o(1155),n=o(8138),a=o(4752),i=o(469),s=o(2302),d=o(5009),u=o(9569),c=o(3922),m=o(3009),f=o(5497),p=o(6069),v=o(257),x=o(959),j=o(4578);let w=e=>{let[t,o]=(0,x.useState)({alreadyExist:"",operation:""}),[w]=(0,v.KO)(l.rz),[O,g]=(0,v.KO)(l.kG),R=e=>(0,l.QF)(w)(e),[b,y]=(0,v.KO)(l.J5),[E,_]=(0,v.KO)(l.e2),[K,Z]=(0,v.KO)(l.jl),[N,S]=(0,v.KO)(l.G_),[z,A]=(0,v.KO)(l.Cf),[T,k]=(0,v.KO)(l.D6),[C,M]=(0,v.KO)(l.ag),[P]=(0,v.KO)(l.Se),[Q,V]=(0,x.useState)(b),{control:F,handleSubmit:q,formState:D}=(0,j.cI)({defaultValues:e.defaultValues}),J=(0,j.qo)({control:F}),[X,G]=(0,v.KO)(l.R4),[H,I]=(0,x.useState)(!1),[L,U]=(0,x.useState)("add"),[B,W]=(0,x.useState)(l.P1),Y=(0,n.N)(P.delay,J);(0,x.useEffect)(()=>{var t,r,n,i,d;let u={from:null!==(t=Y.from)&&void 0!==t?t:O.from,to:null!==(r=Y.to)&&void 0!==r?r:O.to,ic:null!==(n=Y.ic)&&void 0!==n?n:O.ic,mw:null!==(i=Y.mw)&&void 0!==i?i:O.mw,sc:null!==(d=Y.sc)&&void 0!==d?d:O.sc},c=[...Object.entries(O)].map(t=>{var o;let[r,l]=t;return[r,e.frozenAttr.includes(r)?K[r]:null!==(o=Y[r])&&void 0!==o?o:O[r]]}),m=Object.fromEntries(c);["from","to"].forEach(t=>{!e.frozenAttr.includes(t)&&(0,s.lr)(m[t])&&(m[t]=N[t])}),Z(m),I(!!u.from.match(/.*[a-zA-Z].*/));let f=(0,l.z3)(X)(u);"string"==typeof f?(o(e=>({...e,alreadyExist:a.R.confirm.alreadyExist[w]})),U("update"),_({...u,to:f})):(o(e=>({...e,alreadyExist:""})),U("add"),_(u))},[Y,b,X,w,O,Z,_,N,e.frozenAttr,K]);let $=e=>{let{to:t,...r}=e,n=JSON.stringify(r),d=X.delete(n);X.set(n,t),d?(console.log("updated ",E),console.log("to",'"'.concat(t,'"')),o(t=>({...t,operation:a.R.tooltip.operation.update(e.from,E.to)(e.to)[w]})),console.log("atomEntryIdDedupedMap:",C),A(e=>(0,i.L2)(C.get(n))(o=>({from:e.from.map(e=>(0,l.DH)(e=>(e.delete(o),e))(e)),to:e.to.map(e=>(0,s.P)((0,l.Ko)([o])(e))(T,t))}),e))):(console.log("added:",e),o(t=>({...t,operation:a.R.tooltip.operation.add(e.from,e.to)[w]}))),A(t=>(0,l.VU)(T,t)(e)),M(e=>(e.set(n,T),new Map([...e.entries()]))),k(e=>e+1);let u=Array.from(X),c=new Map(u);G(c);let m=u.map(e=>(0,l.bA)(e));y(m),V(m)},ee=e=>{let{to:t,...r}=e,n=JSON.stringify(r),i=X.delete(n);i?(console.log("deleted:",l.e2),o(t=>({...t,operation:a.R.tooltip.operation.delete(e.from,e.to)[w]})),M(e=>(e.delete(n),new Map([...e.entries()]))),A(e=>{let t=(0,l.XZ)(n)(e,E,C);return{from:t("from"),to:t("to")}})):(console.log("failed to delete"),o(e=>({...e,operation:a.R.tooltip.fail("delete")[w]})));let s=Array.from(X),d=new Map(s);G(d);let u=s.map(e=>(0,l.bA)(e));y(u),V(u)},et=function(e){return(0,r.jsx)(d.Z,{control:(0,r.jsx)(j.Qr,{name:e,control:F,render:t=>{let{field:o}=t;return(0,r.jsx)(u.Z,{...o,size:"small",checked:!!o.value,disabled:"mw"==e?void 0:!H})}}),label:(0,l.QF)(w)(e)})},eo=e=>{var t,o,r,n,a;let i={from:null!==(t=Y.from)&&void 0!==t?t:O.from,to:null!==(o=Y.to)&&void 0!==o?o:O.to,ic:null!==(r=Y.ic)&&void 0!==r?r:O.ic,mw:null!==(n=Y.mw)&&void 0!==n?n:O.mw,sc:null!==(a=Y.sc)&&void 0!==a?a:O.sc};W(t=>({...l.P1,[e]:!0})),"add"==e?$(i):"delete"==e&&ee(i)},er=function(e){return(0,r.jsx)(c.Z,{arrow:!0,open:!!B[e],onClose:()=>W(t=>({...t,[e]:!1})),disableHoverListener:!0,placement:"top",title:"add"==e?"update"==L?a.R.tooltip.operation.update(E.from,E.to)(K.to)[w]:a.R.tooltip.operation.add(E.from,E.to)[w]:a.R.tooltip.operation.delete(E.from,E.to)[w],children:(0,r.jsx)(m.Z,{variant:"contained",onClick:t=>eo(e),children:"add"==e?a.R[L][w]:a.R.delete[w]})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.Z,{component:"form",onSubmit:q($),children:[(0,r.jsx)(f.Z,{component:"div",children:[et("ic"),et("sc"),et("mw")]}),(0,r.jsx)(j.Qr,{control:F,name:"from",rules:{required:a.R.form.rules.required[w]},render:e=>{let{field:t}=e;return(0,r.jsx)(p.Z,{...t,variant:"standard",size:"small",label:R("from"),error:!!D.errors.from,helperText:D.errors.from&&D.errors.from.message||!D.isValid&&a.R.form.helperText.invalid[w]})}}),(0,r.jsx)(j.Qr,{control:F,name:"to",render:e=>{let{field:t}=e;return(0,r.jsx)(p.Z,{...t,variant:"standard",size:"small",label:R("to"),error:!!D.errors.to,helperText:D.errors.to&&D.errors.to.message||!D.isValid&&"invalid"})}}),(0,r.jsx)(m.Z,{type:"submit",sx:{display:"none"},children:a.R.add[w]}),[er("add"),er("delete")]]}),(0,r.jsx)(h,{...t})]})},h=e=>(0,r.jsx)(f.Z,{className:"messages",children:Object.entries(e).map(e=>{let[t,o]=e;return(0,r.jsx)("div",{children:o},t)})});t.default=w},8138:function(e,t,o){"use strict";o.d(t,{N:function(){return l}});var r=o(959);let l=(e,t)=>{let[o,l]=(0,r.useState)(t);return(0,r.useEffect)(()=>{let o=setTimeout(()=>l(t),e);return()=>clearTimeout(o)},[t,e]),o}}},function(e){e.O(0,[422,578,257,776,694,616,628,774,888,179],function(){return e(e.s=6591)}),_N_E=e.O()}]);